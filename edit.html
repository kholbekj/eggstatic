<!doctype html>
<html class="no-js" lang="">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Eggstatic Editor</title>

    <!-- Marked is used to convert markdown to HTML -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- JSZip is used to unzip and zip sites -->
    <script src=" https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js "></script>

    <!-- Pico CSS is the CSS framework for the editor -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.cyan.min.css">

    <!-- Ace is the code editor for editing sites -->
    <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.36.3/src-min/ace.js"></script>
    <link href=" https://cdn.jsdelivr.net/npm/ace-builds@1.36.3/css/ace.min.css " rel="stylesheet">
    <!-- End of Ace -->

    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type="text/css" media="screen">
     body {
         margin: 0;
         padding: 0;
         font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
     }

     .editor-container {
         display: flex;
         height: 100vh;
         background: var(--pico-background-color);
     }

     .sidebar {
         width: 280px;
         background: var(--pico-card-background-color);
         border-right: 1px solid var(--pico-muted-border-color);
         display: flex;
         flex-direction: column;
         overflow: hidden;
     }

     .sidebar-header {
         padding: 12px 16px;
         border-bottom: 1px solid var(--pico-muted-border-color);
         background: var(--pico-card-background-color);
         font-size: 0.9rem;
         font-weight: 600;
         color: var(--pico-color);
     }

     .file-explorer {
         flex: 1;
         overflow-y: auto;
         padding: 8px 0;
     }

     .main-panel {
         flex: 1;
         display: flex;
         flex-direction: column;
         background: var(--pico-background-color);
     }

     .editor-header {
         padding: 8px 16px;
         background: var(--pico-card-background-color);
         border-bottom: 1px solid var(--pico-muted-border-color);
         font-size: 0.85rem;
         color: var(--pico-muted-color);
     }

     #editor {
         flex: 1;
         margin: 0;
     }

     .controls-bar {
         padding: 12px 16px;
         background: var(--pico-card-background-color);
         border-top: 1px solid var(--pico-muted-border-color);
         display: flex;
         gap: 12px;
         justify-content: center;
         align-items: center;
     }

     .controls-bar button {
         margin: 0;
         padding: 10px 20px;
         font-size: 0.85rem;
         font-weight: 500;
         border-radius: 6px;
         transition: all 0.2s ease;
         cursor: pointer;
         border: 1px solid transparent;
         min-width: 100px;
         text-align: center;
     }

     .controls-bar button:not(.outline) {
         background: var(--pico-primary-background);
         color: var(--pico-primary-inverse);
         border-color: var(--pico-primary-background);
     }

     .controls-bar button:not(.outline):hover {
         background: var(--pico-primary-hover-background);
         border-color: var(--pico-primary-hover-background);
         transform: translateY(-1px);
         box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
     }

     .controls-bar button.outline {
         background: transparent;
         color: var(--pico-color);
         border-color: var(--pico-muted-border-color);
     }

     .controls-bar button.outline:hover {
         background: var(--pico-muted-border-color);
         border-color: var(--pico-color);
         transform: translateY(-1px);
         box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
     }

     .controls-bar button:active {
         transform: translateY(0);
         box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
     }

     /* File tree styling */
     .file-list {
         list-style: none;
         margin: 0;
         padding: 0;
     }

     .file-item {
         margin: 0;
         padding: 0;
         list-style: none;
     }

     .file-link {
         display: flex;
         align-items: center;
         padding: 6px 16px;
         color: var(--pico-color);
         text-decoration: none;
         font-size: 0.85rem;
         cursor: pointer;
         border-radius: 0;
         transition: background-color 0.15s ease;
     }

     .file-link:hover {
         background: var(--pico-muted-border-color);
         color: var(--pico-color);
         text-decoration: none;
     }

     .file-link.active {
         background: var(--pico-primary-background);
         color: var(--pico-primary-inverse);
     }

     .file-icon {
         margin-right: 8px;
         font-size: 0.9rem;
         width: 16px;
         text-align: center;
     }

     .new-file-btn {
         margin: 8px 12px 12px;
         padding: 6px 12px;
         font-size: 0.8rem;
         background: transparent;
         border: 1px solid var(--pico-muted-border-color);
         color: var(--pico-muted-color);
         cursor: pointer;
         border-radius: 4px;
         transition: all 0.15s ease;
     }

     .new-file-btn:hover {
         background: var(--pico-muted-border-color);
         border-color: var(--pico-color);
         color: var(--pico-color);
     }

     .folder-new-file-btn {
         margin: 4px 8px 8px;
         padding: 4px 8px;
         font-size: 0.75rem;
         background: transparent;
         border: 1px solid var(--pico-muted-border-color);
         color: var(--pico-muted-color);
         cursor: pointer;
         border-radius: 3px;
         transition: all 0.15s ease;
         opacity: 0.7;
     }

     .folder-new-file-btn:hover {
         background: var(--pico-muted-border-color);
         border-color: var(--pico-color);
         color: var(--pico-color);
         opacity: 1;
     }

     /* Folder styling */
     .folder-item {
         margin: 0;
         padding: 0;
         list-style: none;
     }

     .folder-header {
         display: flex;
         align-items: center;
         padding: 6px 16px;
         color: var(--pico-color);
         font-size: 0.85rem;
         cursor: pointer;
         border-radius: 0;
         transition: background-color 0.15s ease;
         user-select: none;
     }

     .folder-header:hover {
         background: var(--pico-muted-border-color);
     }

     .folder-toggle {
         margin-right: 4px;
         font-size: 0.7rem;
         transition: transform 0.15s ease;
         width: 12px;
         text-align: center;
     }

     .folder-toggle.expanded {
         transform: rotate(90deg);
     }

     .folder-icon {
         margin-right: 8px;
         font-size: 0.9rem;
         width: 16px;
         text-align: center;
     }

     .folder-contents {
         display: none;
         list-style: none;
         margin: 0;
         padding: 0;
         padding-left: 16px;
     }

     .folder-contents.expanded {
         display: block;
     }

     .file-link.in-folder {
         padding-left: 32px;
     }

     .file-dirty-indicator {
         margin-left: auto;
         width: 8px;
         height: 8px;
         border-radius: 50%;
         background: #ff6b6b;
         opacity: 0;
         transition: opacity 0.2s ease;
     }

     .file-link.dirty .file-dirty-indicator {
         opacity: 1;
     }

     .file-link.dirty .file-name {
         font-style: italic;
     }

     /* Responsive design */
     @media (max-width: 768px) {
         .sidebar {
             width: 250px;
         }
     }

     @media (max-width: 600px) {
         .editor-container {
             flex-direction: column;
         }

         .sidebar {
             width: 100%;
             height: 200px;
             border-right: none;
             border-bottom: 1px solid var(--pico-muted-border-color);
         }

         .main-panel {
             height: calc(100vh - 200px);
         }
     }

     /* Scrollbar styling for webkit browsers */
     .file-explorer::-webkit-scrollbar {
         width: 6px;
     }

     .file-explorer::-webkit-scrollbar-track {
         background: transparent;
     }

     .file-explorer::-webkit-scrollbar-thumb {
         background: var(--pico-muted-border-color);
         border-radius: 3px;
     }

     .file-explorer::-webkit-scrollbar-thumb:hover {
         background: var(--pico-color);
     }
    </style>
  </head>
  <body>
    <div class="editor-container">
      <div class="sidebar">
        <div class="sidebar-header">
          Files
        </div>
        <div class="file-explorer" id="fileExplorer">
          <!-- File tree will be populated here -->
        </div>
      </div>

      <div class="main-panel">
        <div class="editor-header" id="editorHeader">
          No file selected
        </div>
        <div id="editor"></div>
        <div class="controls-bar" id="controls">
          <button id="save">Save File</button>
          <button id="preview" class="outline">Preview</button>
          <button id="download" class="outline">Download</button>
        </div>
      </div>
    </div>

    <script src="/edit.js"></script>
    <script src="/publish-to-drifting.js"></script>
  </body>
</html>
